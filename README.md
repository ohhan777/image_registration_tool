# Image Registration Tool

이미지 정합을 위한 GUI 도구로, 두 개의 이미지에서 대응점을 선택하고 관리할 수 있는 PyQt6 기반 애플리케이션입니다.

## 기능

### 주요 기능
- **이미지 로드**: PNG, JPG, BMP, GIF, TIF 형식 지원
- **대응점 선택**: 마우스 클릭으로 좌표점 추가/수정/삭제
- **좌표 관리**: 번호 라벨 수정, 개별/전체 삭제 기능
- **확대/축소**: 마우스 휠 또는 툴바 버튼으로 이미지 확대/축소
- **패닝**: Ctrl+드래그 또는 중간 마우스 버튼으로 이미지 이동
- **실행 취소**: Ctrl+Z로 마지막 작업 취소 (최대 50단계)
- **좌표 저장/로드**: 텍스트 파일 형식으로 좌표 데이터 관리
- **이미지 저장**: 좌표가 표시된 이미지 저장

### 사용법

#### 기본 조작
- **좌표 추가**: 마우스 왼쪽 클릭
- **좌표 삭제**: 마우스 오른쪽 클릭 (해당 좌표 근처에서)
- **라벨 수정**: 기존 좌표 번호를 왼쪽 클릭하여 새 번호 입력
- **확대/축소**: 마우스 휠 스크롤
- **이미지 이동**: Ctrl+드래그 또는 중간 마우스 버튼 드래그
- **실행 취소**: Ctrl+Z

#### 툴바 기능
- 📁 **Open**: 이미지 파일 열기
- 📍 **좌표와 함께 열기**: 이미지와 기존 좌표 데이터 동시 로드
- ➕ **Zoom In**: 이미지 확대
- ➖ **Zoom Out**: 이미지 축소
- 💾 **Save**: 좌표가 표시된 이미지 저장
- 📄 **좌표 저장**: 좌표 데이터를 텍스트 파일로 저장
- 🗑️ **전체 삭제**: 모든 좌표 삭제
- ❌ **Exit**: 프로그램 종료

## 설치 및 실행

### 요구사항
- Python 3.10 이상
- 필요한 패키지:
  - PyQt6 >= 6.9.1
  - NumPy >= 2.2.6
  - Pillow >= 11.3.0
  - OpenCV-Python >= 4.11.0.86

### 설치
```bash
# uv 사용 (권장)
uv sync

# 또는 pip 사용
pip install -r requirements.txt
```

### 실행
```bash
python image_registration_tool.py
```

프로그램 실행 시 두 개의 창이 열립니다:
- Image Registration Tool 1
- Image Registration Tool 2

## 파일 형식

### 좌표 데이터 형식 (.txt)
```
1 123.45, 234.56
2 345.67, 456.78
3 567.89, 678.90
```
형식: `번호 X좌표, Y좌표`

### 지원 이미지 형식
- PNG
- JPG/JPEG
- BMP
- GIF
- TIF/TIFF

## 예제 파일

`examples/` 디렉토리에 샘플 이미지와 좌표 데이터가 포함되어 있습니다:
- `LCM00002_PS3_K3_TAOYUAN_20210407.png` + `.txt`
- `LCM00002_PS3_K3_TAOYUAN_20221114.png` + `.txt`

## 프로젝트 구조

```
image_registration_tool/
├── image_registration_tool.py    # 메인 GUI 애플리케이션
├── image_registration.py         # 이미지 정합 처리 모듈
├── icon/                        # 툴바 아이콘 파일들
├── examples/                    # 예제 이미지 및 좌표 데이터
├── pyproject.toml              # 프로젝트 설정
└── README.md                   # 이 파일
```

## 개발자 정보

이 도구는 이미지 정합(Image Registration) 작업을 위해 개발되었으며, 두 시점의 위성/항공 이미지 간 대응점 선택 및 관리에 특화되어 있습니다.

## 라이선스

MIT License